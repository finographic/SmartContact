     pool_db.connect(function (err, client, connect_done) {
        
        if (err) { return console.error('error fetching client from pool', req.body, err); }
        
        
        client.query( { text: loginquery, values: [username, password,req.body.stationid] }, function (err, result) {
            
            

            connect_done();
            
            if (err) { return console.error('error running query', err); }
            
           
            if (result.rows.length != 0) {
                
                
               // localauth = 'result.rows[0]';

                
                console.log(result.rows[0]);


                //good
                return done(null, JSON.stringify(result.rows[0]));

               // res.json(result.rows[0]);
         
            } else {
                
                console.log('FAILED login');

                    return done(null, false, { message: 'Incorrect username /  Password.' });
           

            }

            return done(null, localauth);
        });
   
    
    
    
    });




	
    pgdb.one(pulldialrec, [skillid, 1, null])
    .then(function (data) {
        
        
        console.log('test in');
        console.log(data);

        cb(data); // print new user id;
    })
    .catch(function (error) {
        cb(error);
    });



	var pulldialrec = ' updatesc_contacts set acd_pull_time = now() '
pulldialrec += ' where contact_wk in (select contact_wk from sc_contacts where acd_pull_time is not null LIMIT 1)  '
pulldialrec += ' RETURNING *  '



    //console.log(req.body);

     db.pool_db.connect(function (err, client, connect_done) {
        
        if (err) { return console.error('error fetching client from pool', req.body, err); }
        
        
        client.query( { text: loginquery, values: [username, password,req.body.stationid] }, function (err, result) {
            
            


            
            if (err) { return console.error('error running query', err); }
            
           
            if (result.rows.length != 0) {
                
                
               // localauth = 'result.rows[0]';

                
                console.log(result.rows[0]);


                //good
                return done(null, JSON.stringify(result.rows[0]));

               // res.json(result.rows[0]);
         
            } else {
                
                console.log('FAILED login');

                    return done(null, false, { message: 'Incorrect username /  Password.' });
           

            }

   
        });
   
    

                     $('.statusdialbtn').html('<i class="fa fa-chevron-down" style="border-right-style: solid;padding-right:10px"></i> <i class="' + $(this).parent().find('i').attr('class') + '"></i> ' + btnvalue + '</a> ');


    
    
    });
    


	c_ct : 0, smc_ct : 0 , la_ct : 0, vm_ct : 0


	  

    yahooSearch('4ec400d36092c47fed6cea21431c215aa8b90b26', '4ec400d36092c47fed6cea21431c215aa8b90b26', 'select * from rss(0,8) where url="http://rss.news.yahoo.com/rss/entertainment"', 10, function (error, data, response) {
            
           // socket.emit('yqlnews', JSON.parse(data).query.results.item[0].text.content);
            if (IsJsonString(data)) {
                var resultsus = JSON.parse(data).query.results.item[0].text.content;
                
                
                if (typeof JSON.parse(data).query.results.item[0].text.content === "undefined") {
                    
                    console.log('error on yahoo  news entertain');
               

                } else {
                    // console.log(JSON.parse(data).query.results.item);
                    
                    io.to(socketid).emit('yqlnews', JSON.parse(data).query.results.item);
                }
            }

      //  console.log(JSON.parse(data));
    });
    

	feed("http://feeds.abcnews.com/abcnews/topstories", function (err, articles) {
            
            
            console.log(articles[0]);
            io.to(socketid).emit('yqlnews', articles);
        });



		
                    socket.on('recordaddrinfo', function (record_addr_string) {

                                        address = record_addr_string;


                        //load google mapps

                                        if (mapload == 0) {
                                            mapload = 1;

                                            loadScriptgmap();
                                        } else { console.log('map already loaded');}

                    });


					// inbound search 


					     /*
        if (typeof objuserinfo.inbinfo !== 'undefined') {
            for (var inbkey in objuserinfo.inbinfo) {
                if (objuserinfo.inbinfo[inbkey].currentagchan == '') {
                    console.log('Search agent call Chan inb : ' + inbkey + ' Check Time : ' + moment().format());
                    sendinbagcall(inbkey, client);
                }
            }
        }
        */





		 if (drill_obj.att == 0 && drill_obj.lvl == 'bizunit') {
        drilldown_sql = ' select  '
        drilldown_sql += '   business_unit_wk, contact_wk, first_name, last_name, fl_name, '
        drilldown_sql += '   business_name, home_phone, last_attempt_dt, skill_wk, att_termcode, '
        drilldown_sql += '  dispo_description, attempt_log_attempts, call_att, reptype, skill_name, '
        drilldown_sql += '  addr, online_user_wk from uvw_drilldown where business_unit_wk = ${bizunit} and COALESCE(attempt_log_attempts,0) in (0,1) '
    } else if  (drill_obj.att == 0 && drill_obj.lvl == 'skill') {
        drilldown_sql = ' select  '
        drilldown_sql += '   business_unit_wk, contact_wk, first_name, last_name, fl_name, '
        drilldown_sql += '   business_name, home_phone, last_attempt_dt, skill_wk, att_termcode, '
        drilldown_sql += '  dispo_description, attempt_log_attempts, call_att, reptype, skill_name, '
        drilldown_sql += '  addr, online_user_wk from uvw_drilldown where business_unit_wk = ${bizunit} and COALESCE(attempt_log_attempts,0) in (0,1) '
    }
    else if ((drill_obj.reptype == 'sumcall') && (drill_obj.lvl == 'bizunit')) {
        drilldown_sql = ' select  '
        drilldown_sql += '   business_unit_wk, contact_wk, first_name, last_name, fl_name, '
        drilldown_sql += '   business_name, home_phone, last_attempt_dt, skill_wk, att_termcode, '
        drilldown_sql += '  dispo_description, attempt_log_attempts, call_att, reptype, skill_name, '
        drilldown_sql += '  addr, online_user_wk from uvw_drilldown where business_unit_wk = ${bizunit} and att_wk in (select max(att_wk) from sc_contact_attempt group by contact_wk) '
    } else if ((drill_obj.reptype == 'cbt') && (drill_obj.lvl == 'skill')) {
        drilldown_sql = ' select  '
        drilldown_sql += '   business_unit_wk, contact_wk, first_name, last_name, fl_name, '
        drilldown_sql += '   business_name, home_phone, last_attempt_dt, skill_wk, att_termcode, '
        drilldown_sql += '  dispo_description, attempt_log_attempts, call_att, reptype, skill_name, '
        drilldown_sql += " addr, online_user_wk from uvw_drilldown where skill_wk = ${var_wkin}  and attempt_log_attempts = ${att} and att_termcode = 'CBT'"

    } else if ((drill_obj.reptype == 'cbt') && (drill_obj.lvl == 'bizunit')) {
        drilldown_sql = ' select  '
        drilldown_sql += '   business_unit_wk, contact_wk, first_name, last_name, fl_name, '
        drilldown_sql += '   business_name, home_phone, last_attempt_dt, skill_wk, att_termcode, '
        drilldown_sql += '  dispo_description, attempt_log_attempts, call_att, reptype, skill_name, '
        drilldown_sql += '  addr, online_user_wk from uvw_drilldown where '
        drilldown_sql += " online_user_wk = ${var_wkin}::text and attempt_log_attempts = ${att} and att_termcode = 'CBT'"
    } else if ((drill_obj.reptype == 'sumcall') && (drill_obj.lvl == 'skill')) {
        drilldown_sql = ' select  '
        drilldown_sql += '   business_unit_wk, contact_wk, first_name, last_name, fl_name, '
        drilldown_sql += '   business_name, home_phone, last_attempt_dt, skill_wk, att_termcode, '
        drilldown_sql += '  dispo_description, attempt_log_attempts, call_att, reptype, skill_name, '
        drilldown_sql += '  addr, online_user_wk from uvw_drilldown where skill_wk = ${var_wkin}  and attempt_log_attempts = ${att}'

    } else if ((drill_obj.reptype == 'sumcall') && (drill_obj.lvl == 'user')) {
        drilldown_sql = ' select  '
        drilldown_sql += '   business_unit_wk, contact_wk, first_name, last_name, fl_name, '
        drilldown_sql += '   business_name, home_phone, last_attempt_dt, skill_wk, att_termcode, '
        drilldown_sql += '  dispo_description, attempt_log_attempts, call_att, reptype, skill_name, '
        drilldown_sql += '  addr, online_user_wk from uvw_drilldown where '
        drilldown_sql += '  online_user_wk = ${var_wkin}::text and attempt_log_attempts = ${att} '
    } else if (drill_obj.lvl == 'user' && drill_obj.reptype == 'resp') {
        drilldown_sql = " select * from uvw_drilldown where business_unit_wk = ${bizunit}  and attempt_log_attempts = ${att} and sc_responded = 1 "
        drilldown_sql += ' and online_user_wk = ${var_wkin}::text'
    }
    else if (drill_obj.lvl == 'skill' && drill_obj.reptype == 'resp') {
        drilldown_sql = " select * from uvw_drilldown where business_unit_wk = ${bizunit} and attempt_log_attempts = ${att}  and sc_responded = 1  "
        drilldown_sql += ' and skill_wk = ${var_wkin}'

    } else if (drill_obj.lvl == 'bizunit' && drill_obj.reptype == 'resp') {
        drilldown_sql = " select * from uvw_drilldown where business_unit_wk = ${bizunit}  and attempt_log_attempts = ${att}  and sc_responded = 1  "
        
    }else if (drill_obj.lvl == 'user') {
        drilldown_sql = " select * from uvw_drilldown where business_unit_wk = ${bizunit} and reptype = ${reptype} and attempt_log_attempts = ${att}  "
        drilldown_sql += ' and online_user_wk = ${var_wkin}::text'
    }
    else if (drill_obj.lvl == 'skill' ) {
        drilldown_sql = " select * from uvw_drilldown where business_unit_wk = ${bizunit} and reptype = ${reptype} and attempt_log_attempts = ${att}  "
        drilldown_sql += ' and skill_wk = ${var_wkin}'
    } else if (drill_obj.lvl == 'bizunit' ) {
        drilldown_sql = " select * from uvw_drilldown where business_unit_wk = ${bizunit} and reptype = ${reptype}  and attempt_log_attempts = ${att}  "
       
    }
    